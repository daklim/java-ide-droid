<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>JavaIDEdroid - help</title>
<meta name="author" content="Tom Arn">

<style type="text/css">
body { 
  background-color:#000000; 
  color: #FFFFFF;
  font-weight:normal; 
  font-family: verdana, arial, sans-serif; 
  font-size: small; 
}
a {
  color: #FFFF00;
  text-decoration:underline;
}
h1 {
  font-size: 120%;
  font-weight: bold;
  color: #00FF00;
}
h2 {
  font-size: 110%;
  font-weight: bold;
  color: #00FF00;
  border-bottom: 1px dotted #aaa;
}
h3 {
  font-size: 100%;
  font-weight: bold;
  color: #00FF00;
}
kbd {
  font-size: small;
}
</style>

</head>
<body>

<h1>JavaIDEdroid</h1>
<h2>1. Introduction</h2>
<p>JavaIDEdroid is an integrated development environment which runs on Android and allows to create native Android applications without the need to use the Android SDK on Windows or Linux. It should run on Android 1.6 or higher.</p>

<table>
<tr><td>Version:</td><td>1.2.0</td>
<tr><td>Author:</td><td>Tom Arn, <a href="http://www.t-arn.com">www.t-arn.com</a></td>
<tr><td>Contributions by: </td><td>Ken Ellinwood</td>
<tr><td>Project home page:</td><td><a href="http://code.google.com/p/java-ide-droid/">http://code.google.com/p/java-ide-droid/</a></td>
</table>

<p>Currently, following tools are integrated into JavaIDEdroid:</p>
<ul>
<li>Aapt tool from the Android SDK (<a href="http://developer.android.com">developer.android.com</a>)</li>
<li>Eclipse Java Compiler (<a href="http://www.eclipse.org">www.eclipse.org</a>)</li>
<li>Dx tool from the Android SDK (<a href="http://developer.android.com">developer.android.com</a>)</li>
<li>ApkBuilder tool from the Android SDK (<a href="http://developer.android.com">developer.android.com</a>)</li>
<li>Zipsigner-lib from Ken Ellinwood (<a href="http://code.google.com/p/zip-signer/">http://code.google.com/p/zip-signer</a>)</li>
<li>BeanShell Interpreter (<a href="http://www.beanshell.org">www.beanshell.org</a>)</li>
</ul>

<p>Aapt is integrated as native shared library (arm). It uses external libraries which require Android 2.3 or later and therefore, the aapt shared library has been built for Android 2.3. Despite this fact, it also seems to work an older Android versions (it ran ok on my Android 2.2.1).</p>

<h2>2. BeanShell</h2>
<p>The integrated BeanShell interpreter allows you to automate the build process by writing your own BeanShell scripts.</p>
<h3>2.1 Writing scripts</h3>
<p>BeanShell scripts can access the functionality built into JavaIDEdroid by using the pre-defined variable <kbd>G</kbd>. This variable references G.class with following accessible variables and methods:</p>
<ul>
<li>MainActivity class: G.main </li>
<li>G.stPw1, G.stPw2: Temporary passwords to be used by the scripts </li> 
<li>G.iScriptResultCode: Scripts can return their result value here</li>
<li>IDE class: G.ide provides access to the development tools</li>
<li>int G.ide.fnAapt (String arguments)</li>
<li>int G.ide.fnAapt (String[] arguments)</li>
<li>int G.ide.fnCompile (String arguments)</li>
<li>int G.ide.fnCompile (String[] arguments)</li>
<li>int G.ide.fnDx (String arguments)</li>
<li>int G.ide.fnDx (String[] arguments)</li>
<li>int G.ide.fnApkBuilder (String arguments)</li>
<li>int G.ide.fnApkBuilder (String[] arguments)</li>
<li>int G.ide.fnSignApk (String arguments)</li>
<li>int G.ide.fnSignApk (String[] arguments)</li>
<li>String[] G.ide.fnTokenize (String commandline) // tokenizes the commandline arguments</li>
<li>BeanShellTask class: G.bshTask provides methods for screen output</li>
<li>void G.bshTask.fnClear () // clears BeanShell output</li>
<li>void G.bshTask.fnPublishProgress (String msg) // updates progress dialog message</li>
<li>void G.bshTask.fnToast (String msg, int milliseconds) // shows a toast message</li>
<li>Setting class: G.oSet provides access to variables that can be used in BeanShell scripts:</li>
<li>G.oSet.stAndroidJarPath</li>
<li>G.oSet.stBshVar1</li>
<li>G.oSet.stBshVar2</li>
<li>G.oSet.stBshVar3</li>
<li>G.oSet.stBshVar4</li>
<li>G.oSet.stBshVar5</li>

</ul>
<p>Meaning of the return value: <br>
   <pre>
   0:   OK
   1:   warning
   >1:  error
   99:  no defined return value / exception
   </pre>
<p>
<p>Example for calling ecj:<br><kbd>int rc = G.ide.fnCompile("--version");</kbd></p>

<h3>2.2 Running scripts</h3>
<p>BeanShell scripts must be stored somewhere on the Storage Card. You can enter the path and filename of the script in the edit field or choose the script by tapping the folder icon. To choose a script, the OI File Manager needs to be installed on the device. The <kbd>"Run script!"</kbd> button will start the specified BeanShell script.</p>

<h2>3. Tools</h2>
<p>This tab provides a direct access to the built-in tools without the need for a BeanShell script. All arguments need to be entered in the edit field.</p>

<h2>4. Using with other applications</h2>
<p>JavaIDEdroid supports the "android.intent.action.VIEW" intent action for the text/x-beanshell MIME type. If you define this type for the .bsh extension in your file manager (e.g. ASTRO) you can click a .bsh file and JavaIDEdroid will be started and the script path and filename prepopulated in the edit field.</p>

<p>JavaIDEdroid supports the "android.intent.action.SEND" intent action and can be called from other applications using following code:<br>
<pre>
ComponentName cn = new ComponentName("com.t_arn.JavaIDEdroid", "com.t_arn.JavaIDEdroid.MainActivity");
Intent intent = new Intent("android.intent.action.SEND");
intent.setComponent(cn);
intent.putExtra("android.intent.extra.ScriptPath", "/mnt/sdcard/!Daten/Android/com/t_arn/HelloAndroid/0_build-debug.bsh");
intent.putExtra("android.intent.extra.ScriptAutoRun", true);  // default = false
intent.putExtra("android.intent.extra.ScriptAutoExit", true); // default = false
intent.putExtra("android.intent.extra.WantResultText", true); // default = false
startActivityForResult(intent,123);
</pre>
<p>In the Extra Bundle, you can pass following information:</p>
<ul>
  <li>ScriptPath: This is the path and filename of the script to be run</li>
  <li>ScriptAutoRun: Set this to true to make JavaIDEdroid run the script immediately after starting</li>
  <li>ScriptAutoExit: Set this to true to make JavaIDEdroid shut down after the script ran through</li>
  <li>WantResultText: Set this to true to get back the script output of the BeanShell tab</li>
</ul>
<p>You can get the data returned from JavaIDEdroid in the <kbd>onActivityResult</kbd> method with following code:<br>
<pre>
Bundle extras = intent.getExtras();
if (extras != null) 
{
&nbsp;&nbsp; int iScriptResultCode=extras.getInt("android.intent.extra.ScriptResultCode",-1);
&nbsp;&nbsp; String stResultText=extras.getString("android.intent.extra.ResultText");
}
</pre>
<p>ScriptResultCode is always returned and contains the value of G.iScriptResultCode. If the script sets this variable, its value is returned to the calling app when JavaIDEdroid is finished automatically or by the user.</p>
<p>You can also get the script output of the BeanShell tab by reading the log file <kbd>/mnt/sdcard/.JavaIDEdroid/LogOutput.txt</kbd>. Of course, this only works if you have checked the option 'Log output to file'</p>

<h2>5. Debugging</h2>
<p>If you have problems with JavaIDEdroid, you can set the <kbd>Log Level</kbd> in the options to analyse them. If you define a value higher than NONE, JavaIDEdroid will log informationen to the logcat. The highest amount of information is written with log level VERBOSE.</p>


<h2>6. Legal issues</h2>
<p>Thank you for choosing this SOFTWARE! You may only use this SOFTWARE if you agree with the conditions listed further below:</p>

<p><b>COPYRIGHT</b><br>
This SOFTWARE has been developed by Tom Arn, www.t-arn.com, (in the following termed AUTHOR) and is free under the terms of the GNU General Public License.</p>

<p><b>NO WARRANTY</b><br>
The SOFTWARE is provided AS IS without a warranty of any kind. All express, implied or statutory warranties, including any implied warranty of merchantibility or fitness for a particular purpose, are hereby excluded. The AUTHOR does not warrant that the SOFTWARE is fail-safe or error-free. The user must bear all risks when using the SOFTWARE.</p>

<p><b>NO LIABILITY</b><br>
In no event will the AUTHOR be liable for direct, indirect or consequential damages related to the use (or the inability of the use) of the SOFTWARE, even if the AUTHOR has been advised of the possibility of such damages.</p>

</body>
</html>
